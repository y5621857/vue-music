{"version":3,"sources":["song.js"],"names":[],"mappings":";;;AAAA,SAAQ,qBAAR,QAAuB,UAAvB;AACA,SAAQ,MAAR,QAAqB,YAArB;AACA,SAAQ,MAAR,QAAqB,WAArB;;IAEqB,I;AACnB,sBAAmE;AAAA,QAArD,EAAqD,QAArD,EAAqD;AAAA,QAAjD,GAAiD,QAAjD,GAAiD;AAAA,QAA5C,MAA4C,QAA5C,MAA4C;AAAA,QAApC,IAAoC,QAApC,IAAoC;AAAA,QAA9B,KAA8B,QAA9B,KAA8B;AAAA,QAAvB,QAAuB,QAAvB,QAAuB;AAAA,QAAb,KAAa,QAAb,KAAa;AAAA,QAAN,GAAM,QAAN,GAAM;;AAAA;;AACjE,SAAK,EAAL,GAAU,EAAV;AACA,SAAK,GAAL,GAAW,GAAX;AACA,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,KAAL,GAAa,KAAb;AACA,SAAK,QAAL,GAAgB,QAAhB;AACA,SAAK,KAAL,GAAa,KAAb;AACA,SAAK,GAAL,GAAW,GAAX;AACD;;;;+BAEW;AAAA;;AACV,UAAI,KAAK,KAAT,EAAgB;AACd,eAAO,SAAQ,OAAR,CAAgB,KAAK,KAArB,CAAP;AACD;;AAED,aAAO,aAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,kBAAS,MAAK,GAAd,EAAmB,IAAnB,CAAwB,UAAC,GAAD,EAAS;AAC/B,cAAI,IAAI,OAAJ,KAAgB,MAApB,EAA4B;AAC1B,kBAAK,KAAL,GAAa,OAAO,MAAP,CAAc,IAAI,KAAlB,CAAb;AACA,oBAAQ,MAAK,KAAb;AACD,WAHD,MAGO;AACL,mBAAO,OAAP;AACD;AACF,SAPD;AAQD,OATM,CAAP;AAUD;;;;;;eA3BkB,I;;;AA8BrB,OAAO,SAAS,UAAT,CAAqB,SAArB,EAAgC;AACrC,SAAO,IAAI,IAAJ,CAAS;AACd,QAAI,UAAU,MADA;AAEd,SAAK,UAAU,OAFD;AAGd,YAAQ,aAAa,UAAU,MAAvB,CAHM;AAId,UAAM,UAAU,QAJF;AAKd,WAAO,UAAU,SALH;AAMd,cAAU,UAAU,QANN;AAOd,WAAO,wDAAwD,UAAU,QAAlE,GAA6E,sBAPtE;AAQd,SAAK,qCAAqC,UAAU,MAA/C,GAAwD;AAR/C,GAAT,CAAP;AAUD;;AAED,OAAO,SAAS,WAAT,CAAsB,SAAtB,EAAiC;AACtC,SAAO,IAAI,IAAJ,CAAS;AACd,QAAI,UAAU,EADA;AAEd,SAAK,UAAU,GAFD;AAGd,YAAQ,aAAa,UAAU,MAAvB,CAHM;AAId,UAAM,UAAU,IAJF;AAKd,WAAO,UAAU,KAAV,CAAgB,IALT;AAMd,cAAU,UAAU,QANN;AAOd,WAAO,wDAAwD,UAAU,KAAV,CAAgB,GAAxE,GAA8E,sBAPvE;AAQd,SAAK,qCAAqC,UAAU,EAA/C,GAAoD;AAR3C,GAAT,CAAP;AAUD;;AAED,SAAS,YAAT,CAAuB,MAAvB,EAA+B;AAC7B,MAAI,MAAM,EAAV;AACA,MAAI,CAAC,MAAL,EAAa;AACX,WAAO,EAAP;AACD;AACD,SAAO,OAAP,CAAe,UAAC,CAAD,EAAO;AACpB,QAAI,IAAJ,CAAS,EAAE,IAAX;AACD,GAFD;AAGA,SAAO,IAAI,IAAJ,CAAS,GAAT,CAAP;AACD","file":"song-compiled.js","sourcesContent":["import {getLyric} from 'api/song'\nimport {ERR_OK} from 'api/config'\nimport {Base64} from 'js-base64'\n\nexport default class Song {\n  constructor ({id, mid, singer, name, album, duration, image, url}) {\n    this.id = id\n    this.mid = mid\n    this.singer = singer\n    this.name = name\n    this.album = album\n    this.duration = duration\n    this.image = image\n    this.url = url\n  }\n\n  getLyric () {\n    if (this.lyric) {\n      return Promise.resolve(this.lyric)\n    }\n\n    return new Promise((resolve, reject) => {\n      getLyric(this.mid).then((res) => {\n        if (res.retcode === ERR_OK) {\n          this.lyric = Base64.decode(res.lyric)\n          resolve(this.lyric)\n        } else {\n          reject('error')\n        }\n      })\n    })\n  }\n}\n\nexport function createSong (musicData) {\n  return new Song({\n    id: musicData.songid,\n    mid: musicData.songmid,\n    singer: filterSinger(musicData.singer),\n    name: musicData.songname,\n    album: musicData.albumname,\n    duration: musicData.interval,\n    image: 'https://y.gtimg.cn/music/photo_new/T002R300x300M000' + musicData.albummid + '.jpg?max_age=2592000',\n    url: 'http://ws.stream.qqmusic.qq.com/' + musicData.songid + '.m4a?fromtag=46'\n  })\n}\n\nexport function createSong2 (musicData) {\n  return new Song({\n    id: musicData.id,\n    mid: musicData.mid,\n    singer: filterSinger(musicData.singer),\n    name: musicData.name,\n    album: musicData.album.name,\n    duration: musicData.interval,\n    image: 'https://y.gtimg.cn/music/photo_new/T002R300x300M000' + musicData.album.mid + '.jpg?max_age=2592000',\n    url: 'http://ws.stream.qqmusic.qq.com/' + musicData.id + '.m4a?fromtag=46'\n  })\n}\n\nfunction filterSinger (singer) {\n  let ret = []\n  if (!singer) {\n    return ''\n  }\n  singer.forEach((s) => {\n    ret.push(s.name)\n  })\n  return ret.join('/')\n}\n"]}